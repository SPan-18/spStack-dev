# Common flags
PKG_CPPFLAGS = -I"$(R_HOME)/include"
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS)

# Platform-specific settings
UNAME_S := $(shell uname -s)

ifeq ($(UNAME_S), Linux)
    PKG_LIBS += $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
endif

ifeq ($(UNAME_S), Darwin)
    PKG_LIBS += $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
    # Add specific paths for gfortran installed via Homebrew
    PKG_LIBS += -L/usr/local/opt/gcc/lib/gcc/X -lgfortran -lquadmath
endif

ifeq ($(OS), Windows_NT)
    PKG_LIBS += $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
    # Add paths for gfortran on Windows
    PKG_LIBS += -LC:/rtools40/mingw64/lib -lgfortran -lquadmath
endif
